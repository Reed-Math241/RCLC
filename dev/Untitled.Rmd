---
title: "Untitled"
author: "Ali Taqi"
date: "3/2/2021"
output: pdf_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(RCLC)
#source("clean.R")
#checkouts <- read_csv("RCLC.csv")
```

```{r}
## Import data 
reed_checkouts <- read_excel(path = "Hauser_Circulation_Statistics_2018-2020.xlsx") 
## Rename variables
colnames(reed_checkouts) <- c("Title", "Author", "PubDate", "Location", "Barcode", "Call_No", "Copies", "Loaned", "Returned", "Patron")
# Clean publication date column (Remove copyright symbols, periods, and collapse multiple dates)
reed_checkouts$PubDate <- gsub("[^0-9]", "", reed_checkouts$PubDate)
# Use helper function to 
reed_checkouts$PubDate <- purrr::map_chr(reed_checkouts$PubDate, .handleDATE)
```

```{r}
# Create date range column
reed_checkouts$PubDateRange <- reed_checkouts$PubDate
# Make non-tentative publishing dates numeric
reed_checkouts$PubDate <- as.numeric(reed_checkouts$PubDate)
# Get rows with uncertain publishing dates
#certain_dates <- which(!is.na(as.numeric(reed_checkouts$PubDate)))
certain_dates <- which(str_length(reed_checkouts$PubDate) != 4)
certain_dates <- which(is.na(reed_checkouts$PubDate))
# Make certain dates in range column NA
#reed_checkouts$PubDateRange[certain_dates] <- NA
# Reorder columns (moving PublDate_Range next to PublDate)
reed_checkouts <- reed_checkouts[,c(1,2,3,11,4,5,6,7,8,9,10)]
```

